#!/bin/sh

# ðŸ”’ SECURITY HOOK â€” Pre-commit validation
# Bloqueia commits que contenham caminhos de arquivos locais

# ObtÃ©m arquivos staged
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)

# Se nÃ£o houver arquivos staged, permite o commit
if [ -z "$STAGED_FILES" ]; then
  exit 0
fi

# Executa validaÃ§Ã£o de caminhos locais
node scripts/check-local-paths.js --staged

# Se o script retornar erro, bloqueia o commit
if [ $? -ne 0 ]; then
  echo ""
  echo "ðŸš« Commit bloqueado por violaÃ§Ã£o de seguranÃ§a."
  echo "   Remova os caminhos locais antes de commitar."
  exit 1
fi

exit 0

